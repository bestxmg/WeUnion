{"ast":null,"code":"import React,{useCallback,useEffect,useMemo,useRef,useState}from'react';import{useParams}from'react-router-dom';import{Box,Typography,Avatar,TextField,IconButton,CircularProgress,Alert}from'@mui/material';import{Send}from'@mui/icons-material';import{useSocket}from'../../contexts/SocketContext';import{useAuth}from'../../contexts/AuthContext';import api from'../../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChatRoom=()=>{const{conversationId}=useParams();const{socket}=useSocket();const{user}=useAuth();const[messages,setMessages]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[input,setInput]=useState('');const listRef=useRef(null);const myUserId=user===null||user===void 0?void 0:user.id;const convId=useMemo(()=>Number(conversationId),[conversationId]);const scrollToBottom=useCallback(()=>{requestAnimationFrame(()=>{if(listRef.current){listRef.current.scrollTop=listRef.current.scrollHeight;}});},[]);const loadMessages=useCallback(async()=>{try{setLoading(true);setError('');const res=await api.get(\"/messages/conversations/\".concat(convId,\"/messages?limit=50\"));setMessages(res.data);// Mark unread as read\nconst unreadIds=res.data.filter(m=>m.sender_id!==myUserId&&!m.is_read).map(m=>m.id);if(socket&&unreadIds.length>0){socket.emit('mark_messages_read',{conversationId:convId,messageIds:unreadIds});}}catch(e){var _e$response,_e$response$data;setError(((_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:_e$response$data.error)||'Failed to load messages');}finally{setLoading(false);scrollToBottom();}},[convId,myUserId,socket,scrollToBottom]);useEffect(()=>{loadMessages();},[loadMessages]);useEffect(()=>{if(!socket||!convId)return;const handleNewMessage=messageData=>{if(messageData.conversationId!==convId)return;setMessages(prev=>{var _messageData$sender,_messageData$sender2,_messageData$sender3;const next=[...prev,{id:messageData.id,content:messageData.content,message_type:messageData.messageType||'text',created_at:messageData.createdAt,sender_id:messageData.senderId,sender_username:(_messageData$sender=messageData.sender)===null||_messageData$sender===void 0?void 0:_messageData$sender.username,sender_name:(_messageData$sender2=messageData.sender)===null||_messageData$sender2===void 0?void 0:_messageData$sender2.displayName,sender_avatar:(_messageData$sender3=messageData.sender)===null||_messageData$sender3===void 0?void 0:_messageData$sender3.avatarUrl,is_read:messageData.senderId===myUserId}];return next;});// If it's from others, mark read immediately (since we're viewing)\nif(messageData.senderId!==myUserId){socket.emit('mark_messages_read',{conversationId:convId,messageIds:[messageData.id]});}scrollToBottom();};socket.emit('join_conversation',convId);socket.on('new_message',handleNewMessage);return()=>{socket.emit('leave_conversation',convId);socket.off('new_message',handleNewMessage);};},[socket,convId,myUserId,scrollToBottom]);const sendMessage=useCallback(()=>{const content=input.trim();if(!content||!socket||!convId)return;socket.emit('send_message',{conversationId:convId,content,messageType:'text'});setInput('');},[input,socket,convId]);const handleKeyDown=e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();sendMessage();}};const renderMessage=m=>{var _m$sender_name,_m$sender_username;const isMine=m.sender_id===myUserId;return/*#__PURE__*/_jsxs(Box,{display:\"flex\",justifyContent:isMine?'flex-end':'flex-start',my:1,px:2,children:[!isMine&&/*#__PURE__*/_jsx(Avatar,{src:m.sender_avatar,sx:{width:28,height:28,mr:1},children:((_m$sender_name=m.sender_name)===null||_m$sender_name===void 0?void 0:_m$sender_name[0])||((_m$sender_username=m.sender_username)===null||_m$sender_username===void 0?void 0:_m$sender_username[0])||'?'}),/*#__PURE__*/_jsxs(Box,{sx:{maxWidth:'70%',bgcolor:isMine?'primary.main':'background.paper',color:isMine?'primary.contrastText':'text.primary',borderRadius:2,p:1.2},children:[!isMine&&/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",children:m.sender_name||m.sender_username}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",whiteSpace:\"pre-wrap\",children:m.message_type==='image'?'[Image]':m.content}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:isMine?'primary.contrastText':'text.secondary',display:\"block\",textAlign:isMine?'right':'left',children:new Date(m.created_at).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})})]})]},m.id);};if(loading){return/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",height:\"100%\",children:/*#__PURE__*/_jsx(CircularProgress,{})});}if(error){return/*#__PURE__*/_jsx(Box,{p:2,children:/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:error})});}return/*#__PURE__*/_jsxs(Box,{sx:{height:'100%',display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(Box,{ref:listRef,sx:{flex:1,overflow:'auto',py:1},children:messages.map(renderMessage)}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',p:1,borderTop:'1px solid',borderColor:'divider'},children:[/*#__PURE__*/_jsx(TextField,{value:input,onChange:e=>setInput(e.target.value),onKeyDown:handleKeyDown,placeholder:\"Type a message\",fullWidth:true,size:\"small\",multiline:true,maxRows:4}),/*#__PURE__*/_jsx(IconButton,{color:\"primary\",onClick:sendMessage,sx:{ml:1},disabled:!input.trim(),children:/*#__PURE__*/_jsx(Send,{})})]})]});};export default ChatRoom;","map":{"version":3,"names":["React","useCallback","useEffect","useMemo","useRef","useState","useParams","Box","Typography","Avatar","TextField","IconButton","CircularProgress","Alert","Send","useSocket","useAuth","api","jsx","_jsx","jsxs","_jsxs","ChatRoom","conversationId","socket","user","messages","setMessages","loading","setLoading","error","setError","input","setInput","listRef","myUserId","id","convId","Number","scrollToBottom","requestAnimationFrame","current","scrollTop","scrollHeight","loadMessages","res","get","concat","data","unreadIds","filter","m","sender_id","is_read","map","length","emit","messageIds","e","_e$response","_e$response$data","response","handleNewMessage","messageData","prev","_messageData$sender","_messageData$sender2","_messageData$sender3","next","content","message_type","messageType","created_at","createdAt","senderId","sender_username","sender","username","sender_name","displayName","sender_avatar","avatarUrl","on","off","sendMessage","trim","handleKeyDown","key","shiftKey","preventDefault","renderMessage","_m$sender_name","_m$sender_username","isMine","display","justifyContent","my","px","children","src","sx","width","height","mr","maxWidth","bgcolor","color","borderRadius","p","variant","whiteSpace","textAlign","Date","toLocaleTimeString","hour","minute","alignItems","severity","flexDirection","ref","flex","overflow","py","borderTop","borderColor","value","onChange","target","onKeyDown","placeholder","fullWidth","size","multiline","maxRows","onClick","ml","disabled"],"sources":["/workspace/client/src/components/Chat/ChatRoom.js"],"sourcesContent":["import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport {\n  Box,\n  Typography,\n  Avatar,\n  TextField,\n  IconButton,\n  CircularProgress,\n  Alert,\n} from '@mui/material';\nimport { Send } from '@mui/icons-material';\nimport { useSocket } from '../../contexts/SocketContext';\nimport { useAuth } from '../../contexts/AuthContext';\nimport api from '../../services/api';\n\nconst ChatRoom = () => {\n  const { conversationId } = useParams();\n  const { socket } = useSocket();\n  const { user } = useAuth();\n\n  const [messages, setMessages] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [input, setInput] = useState('');\n  const listRef = useRef(null);\n\n  const myUserId = user?.id;\n  const convId = useMemo(() => Number(conversationId), [conversationId]);\n\n  const scrollToBottom = useCallback(() => {\n    requestAnimationFrame(() => {\n      if (listRef.current) {\n        listRef.current.scrollTop = listRef.current.scrollHeight;\n      }\n    });\n  }, []);\n\n  const loadMessages = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError('');\n      const res = await api.get(`/messages/conversations/${convId}/messages?limit=50`);\n      setMessages(res.data);\n      // Mark unread as read\n      const unreadIds = res.data\n        .filter(m => m.sender_id !== myUserId && !m.is_read)\n        .map(m => m.id);\n      if (socket && unreadIds.length > 0) {\n        socket.emit('mark_messages_read', { conversationId: convId, messageIds: unreadIds });\n      }\n    } catch (e) {\n      setError(e.response?.data?.error || 'Failed to load messages');\n    } finally {\n      setLoading(false);\n      scrollToBottom();\n    }\n  }, [convId, myUserId, socket, scrollToBottom]);\n\n  useEffect(() => {\n    loadMessages();\n  }, [loadMessages]);\n\n  useEffect(() => {\n    if (!socket || !convId) return;\n\n    const handleNewMessage = (messageData) => {\n      if (messageData.conversationId !== convId) return;\n      setMessages(prev => {\n        const next = [\n          ...prev,\n          {\n            id: messageData.id,\n            content: messageData.content,\n            message_type: messageData.messageType || 'text',\n            created_at: messageData.createdAt,\n            sender_id: messageData.senderId,\n            sender_username: messageData.sender?.username,\n            sender_name: messageData.sender?.displayName,\n            sender_avatar: messageData.sender?.avatarUrl,\n            is_read: messageData.senderId === myUserId,\n          },\n        ];\n        return next;\n      });\n      // If it's from others, mark read immediately (since we're viewing)\n      if (messageData.senderId !== myUserId) {\n        socket.emit('mark_messages_read', { conversationId: convId, messageIds: [messageData.id] });\n      }\n      scrollToBottom();\n    };\n\n    socket.emit('join_conversation', convId);\n    socket.on('new_message', handleNewMessage);\n\n    return () => {\n      socket.emit('leave_conversation', convId);\n      socket.off('new_message', handleNewMessage);\n    };\n  }, [socket, convId, myUserId, scrollToBottom]);\n\n  const sendMessage = useCallback(() => {\n    const content = input.trim();\n    if (!content || !socket || !convId) return;\n\n    socket.emit('send_message', {\n      conversationId: convId,\n      content,\n      messageType: 'text',\n    });\n\n    setInput('');\n  }, [input, socket, convId]);\n\n  const handleKeyDown = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      sendMessage();\n    }\n  };\n\n  const renderMessage = (m) => {\n    const isMine = m.sender_id === myUserId;\n    return (\n      <Box key={m.id} display=\"flex\" justifyContent={isMine ? 'flex-end' : 'flex-start'} my={1} px={2}>\n        {!isMine && (\n          <Avatar src={m.sender_avatar} sx={{ width: 28, height: 28, mr: 1 }}>\n            {m.sender_name?.[0] || m.sender_username?.[0] || '?'}\n          </Avatar>\n        )}\n        <Box\n          sx={{\n            maxWidth: '70%',\n            bgcolor: isMine ? 'primary.main' : 'background.paper',\n            color: isMine ? 'primary.contrastText' : 'text.primary',\n            borderRadius: 2,\n            p: 1.2,\n          }}\n        >\n          {!isMine && (\n            <Typography variant=\"caption\" color=\"text.secondary\">\n              {m.sender_name || m.sender_username}\n            </Typography>\n          )}\n          <Typography variant=\"body2\" whiteSpace=\"pre-wrap\">\n            {m.message_type === 'image' ? '[Image]' : m.content}\n          </Typography>\n          <Typography variant=\"caption\" color={isMine ? 'primary.contrastText' : 'text.secondary'} display=\"block\" textAlign={isMine ? 'right' : 'left'}>\n            {new Date(m.created_at).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n          </Typography>\n        </Box>\n      </Box>\n    );\n  };\n\n  if (loading) {\n    return (\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"100%\">\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  if (error) {\n    return (\n      <Box p={2}>\n        <Alert severity=\"error\">{error}</Alert>\n      </Box>\n    );\n  }\n\n  return (\n    <Box sx={{ height: '100%', display: 'flex', flexDirection: 'column' }}>\n      <Box ref={listRef} sx={{ flex: 1, overflow: 'auto', py: 1 }}>\n        {messages.map(renderMessage)}\n      </Box>\n\n      <Box sx={{ display: 'flex', alignItems: 'center', p: 1, borderTop: '1px solid', borderColor: 'divider' }}>\n        <TextField\n          value={input}\n          onChange={(e) => setInput(e.target.value)}\n          onKeyDown={handleKeyDown}\n          placeholder=\"Type a message\"\n          fullWidth\n          size=\"small\"\n          multiline\n          maxRows={4}\n        />\n        <IconButton color=\"primary\" onClick={sendMessage} sx={{ ml: 1 }} disabled={!input.trim()}>\n          <Send />\n        </IconButton>\n      </Box>\n    </Box>\n  );\n};\n\nexport default ChatRoom;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}