{"ast":null,"code":"import _objectSpread from\"/workspace/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{Link,useNavigate}from'react-router-dom';import{Box,Card,CardContent,TextField,Button,Typography,Alert,InputAdornment,IconButton}from'@mui/material';import{Visibility,VisibilityOff,ChatBubble}from'@mui/icons-material';import{useAuth}from'../../contexts/AuthContext';import api from'../../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const[formData,setFormData]=useState({username:'',password:''});const[showPassword,setShowPassword]=useState(false);const{login,setLoading,setError,error,isLoading}=useAuth();const navigate=useNavigate();const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();setLoading(true);try{const response=await api.post('/auth/login',formData);login(response.data.user,response.data.token);navigate('/');}catch(error){var _error$response,_error$response$data;setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Login failed. Please try again.');}finally{setLoading(false);}};return/*#__PURE__*/_jsx(Box,{sx:{minHeight:'100vh',display:'flex',alignItems:'center',justifyContent:'center',background:'linear-gradient(135deg, #1AAD19 0%, #4CAF50 100%)',padding:2},children:/*#__PURE__*/_jsx(Card,{sx:{width:'100%',maxWidth:400,boxShadow:'0 8px 32px rgba(0,0,0,0.1)',borderRadius:3},children:/*#__PURE__*/_jsxs(CardContent,{sx:{p:4},children:[/*#__PURE__*/_jsxs(Box,{textAlign:\"center\",mb:3,children:[/*#__PURE__*/_jsx(ChatBubble,{sx:{fontSize:48,color:'primary.main',mb:1}}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",fontWeight:\"bold\",gutterBottom:true,children:\"WeChat\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"Connect with friends and family\"})]}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:2},children:error}),/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleSubmit,noValidate:true,children:[/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,id:\"username\",label:\"Username\",name:\"username\",autoComplete:\"username\",autoFocus:true,value:formData.username,onChange:handleChange,disabled:isLoading,sx:{mb:2}}),/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,name:\"password\",label:\"Password\",type:showPassword?'text':'password',id:\"password\",autoComplete:\"current-password\",value:formData.password,onChange:handleChange,disabled:isLoading,InputProps:{endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"toggle password visibility\",onClick:()=>setShowPassword(!showPassword),edge:\"end\",children:showPassword?/*#__PURE__*/_jsx(VisibilityOff,{}):/*#__PURE__*/_jsx(Visibility,{})})})},sx:{mb:3}}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",size:\"large\",disabled:isLoading,sx:{py:1.5,mb:2,borderRadius:2,fontSize:'1rem',fontWeight:'bold'},children:isLoading?'Signing In...':'Sign In'}),/*#__PURE__*/_jsx(Box,{textAlign:\"center\",children:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"Don't have an account?\",' ',/*#__PURE__*/_jsx(Link,{to:\"/register\",style:{color:'#1AAD19',textDecoration:'none',fontWeight:'bold'},children:\"Sign Up\"})]})})]})]})})});};export default Login;","map":{"version":3,"names":["React","useState","Link","useNavigate","Box","Card","CardContent","TextField","Button","Typography","Alert","InputAdornment","IconButton","Visibility","VisibilityOff","ChatBubble","useAuth","api","jsx","_jsx","jsxs","_jsxs","Login","formData","setFormData","username","password","showPassword","setShowPassword","login","setLoading","setError","error","isLoading","navigate","handleChange","e","_objectSpread","target","name","value","handleSubmit","preventDefault","response","post","data","user","token","_error$response","_error$response$data","sx","minHeight","display","alignItems","justifyContent","background","padding","children","width","maxWidth","boxShadow","borderRadius","p","textAlign","mb","fontSize","color","variant","component","fontWeight","gutterBottom","severity","onSubmit","noValidate","margin","required","fullWidth","id","label","autoComplete","autoFocus","onChange","disabled","type","InputProps","endAdornment","position","onClick","edge","size","py","to","style","textDecoration"],"sources":["/workspace/client/src/components/Auth/Login.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport {\n  Box,\n  Card,\n  CardContent,\n  TextField,\n  Button,\n  Typography,\n  Alert,\n  InputAdornment,\n  IconButton,\n} from '@mui/material';\nimport { Visibility, VisibilityOff, ChatBubble } from '@mui/icons-material';\nimport { useAuth } from '../../contexts/AuthContext';\nimport api from '../../services/api';\n\nconst Login = () => {\n  const [formData, setFormData] = useState({\n    username: '',\n    password: '',\n  });\n  const [showPassword, setShowPassword] = useState(false);\n  const { login, setLoading, setError, error, isLoading } = useAuth();\n  const navigate = useNavigate();\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    \n    try {\n      const response = await api.post('/auth/login', formData);\n      login(response.data.user, response.data.token);\n      navigate('/');\n    } catch (error) {\n      setError(error.response?.data?.error || 'Login failed. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Box\n      sx={{\n        minHeight: '100vh',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        background: 'linear-gradient(135deg, #1AAD19 0%, #4CAF50 100%)',\n        padding: 2,\n      }}\n    >\n      <Card\n        sx={{\n          width: '100%',\n          maxWidth: 400,\n          boxShadow: '0 8px 32px rgba(0,0,0,0.1)',\n          borderRadius: 3,\n        }}\n      >\n        <CardContent sx={{ p: 4 }}>\n          <Box textAlign=\"center\" mb={3}>\n            <ChatBubble sx={{ fontSize: 48, color: 'primary.main', mb: 1 }} />\n            <Typography variant=\"h4\" component=\"h1\" fontWeight=\"bold\" gutterBottom>\n              WeChat\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              Connect with friends and family\n            </Typography>\n          </Box>\n\n          {error && (\n            <Alert severity=\"error\" sx={{ mb: 2 }}>\n              {error}\n            </Alert>\n          )}\n\n          <Box component=\"form\" onSubmit={handleSubmit} noValidate>\n            <TextField\n              margin=\"normal\"\n              required\n              fullWidth\n              id=\"username\"\n              label=\"Username\"\n              name=\"username\"\n              autoComplete=\"username\"\n              autoFocus\n              value={formData.username}\n              onChange={handleChange}\n              disabled={isLoading}\n              sx={{ mb: 2 }}\n            />\n\n            <TextField\n              margin=\"normal\"\n              required\n              fullWidth\n              name=\"password\"\n              label=\"Password\"\n              type={showPassword ? 'text' : 'password'}\n              id=\"password\"\n              autoComplete=\"current-password\"\n              value={formData.password}\n              onChange={handleChange}\n              disabled={isLoading}\n              InputProps={{\n                endAdornment: (\n                  <InputAdornment position=\"end\">\n                    <IconButton\n                      aria-label=\"toggle password visibility\"\n                      onClick={() => setShowPassword(!showPassword)}\n                      edge=\"end\"\n                    >\n                      {showPassword ? <VisibilityOff /> : <Visibility />}\n                    </IconButton>\n                  </InputAdornment>\n                ),\n              }}\n              sx={{ mb: 3 }}\n            />\n\n            <Button\n              type=\"submit\"\n              fullWidth\n              variant=\"contained\"\n              size=\"large\"\n              disabled={isLoading}\n              sx={{\n                py: 1.5,\n                mb: 2,\n                borderRadius: 2,\n                fontSize: '1rem',\n                fontWeight: 'bold',\n              }}\n            >\n              {isLoading ? 'Signing In...' : 'Sign In'}\n            </Button>\n\n            <Box textAlign=\"center\">\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Don't have an account?{' '}\n                <Link\n                  to=\"/register\"\n                  style={{\n                    color: '#1AAD19',\n                    textDecoration: 'none',\n                    fontWeight: 'bold',\n                  }}\n                >\n                  Sign Up\n                </Link>\n              </Typography>\n            </Box>\n          </Box>\n        </CardContent>\n      </Card>\n    </Box>\n  );\n};\n\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}